<app-header-admin *ngIf="fromAdmin"></app-header-admin>


<!-- register.component.html -->
<!-- register.component.html -->
<div class="login-container">
  <h1 style="color: #a15432;">Register Here</h1>
  <h3>Enter your details</h3>
  <form [formGroup]="registerForm" >
      <p-card header="" [style]="{ width: '360px' }">
          <!-- New Fields Based on User Data -->
          <div class="field">
              <label for="firstName">First Name</label>
              <input type="text" pInputText formControlName="firstName" class="w-full" name="firstName" placeholder="Enter your first name" />
              <small *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="block p-error">
                  <div *ngIf="firstName.errors?.['required']">First Name is required.</div>
              </small>
          </div>

          <div class="field">
              <label for="lastName">Last Name</label>
              <input type="text" pInputText formControlName="lastName" class="w-full" name="lastName" placeholder="Enter your last name" />
              <small *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="block p-error">
                  <div *ngIf="lastName.errors?.['required']">Last Name is required.</div>
              </small>
          </div>

          <div class="field">
              <label for="username">Username</label>
              <input type="text" pInputText formControlName="username" class="w-full" name="username" placeholder="Enter your username" />
              <small *ngIf="username.invalid && (username.dirty || username.touched)" class="block p-error">
                  <div *ngIf="username.errors?.['required']">Username is required.</div>
              </small>
          </div>

          <div class="field">
              <label for="phoneNumber">Phone Number</label>
              <input type="tel" pInputText formControlName="phoneNumber" class="w-full" name="phoneNumber" placeholder="Enter your phone number" />
              <small *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)" class="block p-error">
                  <div *ngIf="phoneNumber.errors?.['required']">Phone Number is required.</div>
              </small>
          </div>

          <div class="field">
              <label for="address">Address</label>
              <input type="text" pInputText formControlName="address" class="w-full" name="address" placeholder="Enter your address" />
              <small *ngIf="address.invalid && (address.dirty || address.touched)" class="block p-error">
                  <div *ngIf="address.errors?.['required']">Address is required.</div>
              </small>
          </div>

          <!-- Existing Fields -->
          <div class="field">
              <label for="email">Email</label>
              <input type="email" pInputText formControlName="emailAddress" class="w-full" name="email" placeholder="Type your email" />
              <small *ngIf="email.invalid && (email.dirty || email.touched)" class="block p-error">
                  <div *ngIf="email.errors?.['required']">Email is required.</div>
                  <div *ngIf="email.errors?.['email']">Email should be valid</div>
              </small>
          </div>

          <div class="field">
              <label for="password">Password</label>
              <input type="password" pInputText formControlName="password" class="w-full" name="password" placeholder="Type your password" />
              <small *ngIf="password.invalid && (password.dirty || password.touched)" class="block p-error">
                  <div *ngIf="password.errors?.['required']">Password is required.</div>
              </small>
          </div>

          <div class="field">
              <label for="confirmPassword">Confirm Password</label>
              <input type="password" pInputText formControlName="confirmPassword" class="w-full" name="confirmPassword" placeholder="Confirm Password" />
              <small *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)" class="block p-error">
                  <div *ngIf="confirmPassword.errors?.['required']">Confirm the password</div>
              </small>
              <small class="block p-error" *ngIf="registerForm.errors?.['passwordMismatch'] && confirmPassword.valid && password.valid">
                  Password should match
              </small>
          </div>

          <div class="field field-account-type" *ngIf="getUserRole() !== userRoles.admin">
            <label>Account Type (Non-Admin)</label>
            <div class="p-field-radiobutton">
                <input type="radio" id="type1" name="accountType" value="customer" formControlName="accountType" class="custom-radio-button">
                <label for="type1">Personal</label>
            </div>
            <div class="p-field-radiobutton">
                <input type="radio" id="type2" name="accountType" value="merchant" formControlName="accountType" class="custom-radio-button">
                <label for="type2">Merchant</label>
            </div>
            <small *ngIf="accountType.invalid && (accountType.dirty || accountType.touched)" class="block p-error">
                <div *ngIf="accountType.errors?.['required']">Selecting an account type is required.</div>
            </small>
        </div>
        

          <!-- Original Button -->
          <button type="submit" (click)="signup(registerForm.value)">REGISTER</button>

          <!-- <button type="submit" (click)="companyDetails(cmpnydetails)">REGISTER</button> -->

          <div class="mt-2">Already a member? <a routerLink="/login">Login</a></div>
      </p-card>
  </form>
</div>